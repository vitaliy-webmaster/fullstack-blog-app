#!/bin/bash  
ramfs_size_mb=384
SCRIPT_DIR=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )
mount_point=${SCRIPT_DIR}/node_modules

ramfs_size_sectors=$((${ramfs_size_mb}*1024*1024/512))  
ramdisk_dev=`sudo hdik -drivekey system-image=yes -nomount ram://${ramfs_size_sectors}`
sudo newfs_hfs -v 'node_modules' ${ramdisk_dev}    
mkdir -p ${mount_point}  
sudo mount -o nobrowse,noatime -t hfs ${ramdisk_dev} ${mount_point}
sudo chmod 777 ${mount_point}

echo "remove with:"  
echo "umount ${mount_point}"  
echo "diskutil eject ${ramdisk_dev}" 